/* eslint-disable */
ops = {
  /*--- Load/store ---*/
  LDrr_bb: function () {
    registers.b = registers.b;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_bc: function () {
    registers.b = registers.c;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_bd: function () {
    registers.b = registers.d;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_be: function () {
    registers.b = registers.e;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_bh: function () {
    registers.b = registers.h;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_bl: function () {
    registers.b = registers.l;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ba: function () {
    registers.b = registers.a;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_cb: function () {
    registers.c = registers.b;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_cc: function () {
    registers.c = registers.c;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_cd: function () {
    registers.c = registers.d;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ce: function () {
    registers.c = registers.e;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ch: function () {
    registers.c = registers.h;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_cl: function () {
    registers.c = registers.l;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ca: function () {
    registers.c = registers.a;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_db: function () {
    registers.d = registers.b;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_dc: function () {
    registers.d = registers.c;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_dd: function () {
    registers.d = registers.d;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_de: function () {
    registers.d = registers.e;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_dh: function () {
    registers.d = registers.h;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_dl: function () {
    registers.d = registers.l;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_da: function () {
    registers.d = registers.a;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_eb: function () {
    registers.e = registers.b;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ec: function () {
    registers.e = registers.c;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ed: function () {
    registers.e = registers.d;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ee: function () {
    registers.e = registers.e;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_eh: function () {
    registers.e = registers.h;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_el: function () {
    registers.e = registers.l;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ea: function () {
    registers.e = registers.a;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_hb: function () {
    registers.h = registers.b;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_hc: function () {
    registers.h = registers.c;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_hd: function () {
    registers.h = registers.d;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_he: function () {
    registers.h = registers.e;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_hh: function () {
    registers.h = registers.h;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_hl: function () {
    registers.h = registers.l;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ha: function () {
    registers.h = registers.a;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_lb: function () {
    registers.l = registers.b;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_lc: function () {
    registers.l = registers.c;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ld: function () {
    registers.l = registers.d;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_le: function () {
    registers.l = registers.e;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_lh: function () {
    registers.l = registers.h;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ll: function () {
    registers.l = registers.l;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_la: function () {
    registers.l = registers.a;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ab: function () {
    registers.a = registers.b;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ac: function () {
    registers.a = registers.c;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ad: function () {
    registers.a = registers.d;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ae: function () {
    registers.a = registers.e;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_ah: function () {
    registers.a = registers.h;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_al: function () {
    registers.a = registers.l;
    registers.m = 1;
    registers.t = 4;
  },
  LDrr_aa: function () {
    registers.a = registers.a;
    registers.m = 1;
    registers.t = 4;
  },

  LDrHLm_b: function () {
    registers.b = MMU.rb((registers.h << 8) + registers.l);
    registers.m = 2;
    registers.t = 8;
  },
  LDrHLm_c: function () {
    registers.c = MMU.rb((registers.h << 8) + registers.l);
    registers.m = 2;
    registers.t = 8;
  },
  LDrHLm_d: function () {
    registers.d = MMU.rb((registers.h << 8) + registers.l);
    registers.m = 2;
    registers.t = 8;
  },
  LDrHLm_e: function () {
    registers.e = MMU.rb((registers.h << 8) + registers.l);
    registers.m = 2;
    registers.t = 8;
  },
  LDrHLm_h: function () {
    registers.h = MMU.rb((registers.h << 8) + registers.l);
    registers.m = 2;
    registers.t = 8;
  },
  LDrHLm_l: function () {
    registers.l = MMU.rb((registers.h << 8) + registers.l);
    registers.m = 2;
    registers.t = 8;
  },
  LDrHLm_a: function () {
    registers.a = MMU.rb((registers.h << 8) + registers.l);
    registers.m = 2;
    registers.t = 8;
  },

  LDHLmr_b: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.b);
    registers.m = 2;
    registers.t = 8;
  },
  LDHLmr_c: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.c);
    registers.m = 2;
    registers.t = 8;
  },
  LDHLmr_d: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.d);
    registers.m = 2;
    registers.t = 8;
  },
  LDHLmr_e: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.e);
    registers.m = 2;
    registers.t = 8;
  },
  LDHLmr_h: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.h);
    registers.m = 2;
    registers.t = 8;
  },
  LDHLmr_l: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.l);
    registers.m = 2;
    registers.t = 8;
  },
  LDHLmr_a: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.a);
    registers.m = 2;
    registers.t = 8;
  },

  LDrn_c: function () {
    registers.c = MMU.rb(registers.pc);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
  },
  LDrn_d: function () {
    registers.d = MMU.rb(registers.pc);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
  },
  LDrn_e: function () {
    registers.e = MMU.rb(registers.pc);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
  },
  LDrn_h: function () {
    registers.h = MMU.rb(registers.pc);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
  },
  LDrn_l: function () {
    registers.l = MMU.rb(registers.pc);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
  },
  LDrn_a: function () {
    registers.a = MMU.rb(registers.pc);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
  },

  LDHLmn: function () {
    MMU.wb((registers.h << 8) + registers.l, MMU.rb(registers.pc));
    registers.pc++;
    registers.m = 3;
    registers.t = 12;
  },

  LDDEmA: function () {
    MMU.wb((registers.d << 8) + registers.e, registers.a);
    registers.m = 2;
    registers.t = 8;
  },

  LDmmA: function () {
    MMU.wb(MMU.rw(registers.pc), registers.a);
    registers.pc += 2;
    registers.m = 4;
    registers.t = 16;
  },

  LDABCm: function () {
    registers.a = MMU.rb((registers.b << 8) + registers.c);
    registers.m = 2;
    registers.t = 8;
  },
  LDADEm: function () {
    registers.a = MMU.rb((registers.d << 8) + registers.e);
    registers.m = 2;
    registers.t = 8;
  },

  LDAmm: function () {
    registers.a = MMU.rb(MMU.rw(registers.pc));
    registers.pc += 2;
    registers.m = 4;
    registers.t = 16;
  },

  LDDEnn: function () {
    registers.e = MMU.rb(registers.pc);
    registers.d = MMU.rb(registers.pc + 1);
    registers.pc += 2;
    registers.m = 3;
    registers.t = 12;
  },
  LDHLnn: function () {
    registers.l = MMU.rb(registers.pc);
    registers.h = MMU.rb(registers.pc + 1);
    registers.pc += 2;
    registers.m = 3;
    registers.t = 12;
  },
  LDSPnn: function () {
    registers.sp = MMU.rw(registers.pc);
    registers.pc += 2;
    registers.m = 3;
    registers.t = 12;
  },

  LDHLmm: function () {
    var i = MMU.rw(registers.pc);
    registers.pc += 2;
    registers.l = MMU.rb(i);
    registers.h = MMU.rb(i + 1);
    registers.m = 5;
    registers.t = 20;
  },
  LDmmHL: function () {
    var i = MMU.rw(registers.pc);
    registers.pc += 2;
    MMU.ww(i, (registers.h << 8) + registers.l);
    registers.m = 5;
    registers.t = 20;
  },

  LDHLIA: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.a);
    registers.l = (registers.l + 1) & 255;
    if (!registers.l) registers.h = (registers.h + 1) & 255;
    registers.m = 2;
    registers.t = 8;
  },
  LDAHLI: function () {
    registers.a = MMU.rb((registers.h << 8) + registers.l);
    registers.l = (registers.l + 1) & 255;
    if (!registers.l) registers.h = (registers.h + 1) & 255;
    registers.m = 2;
    registers.t = 8;
  },

  LDHLDA: function () {
    MMU.wb((registers.h << 8) + registers.l, registers.a);
    registers.l = (registers.l - 1) & 255;
    if (registers.l == 255) registers.h = (registers.h - 1) & 255;
    registers.m = 2;
    registers.t = 8;
  },
  LDAHLD: function () {
    registers.a = MMU.rb((registers.h << 8) + registers.l);
    registers.l = (registers.l - 1) & 255;
    if (registers.l == 255) registers.h = (registers.h - 1) & 255;
    registers.m = 2;
    registers.t = 8;
  },

  LDAIOn: function () {
    registers.a = MMU.rb(0xff00 + MMU.rb(registers.pc));
    registers.pc++;
    registers.m = 3;
    registers.t = 12;
  },
  LDIOnA: function () {
    MMU.wb(0xff00 + MMU.rb(registers.pc), registers.a);
    registers.pc++;
    registers.m = 3;
    registers.t = 12;
  },
  LDAIOC: function () {
    registers.a = MMU.rb(0xff00 + registers.c);
    registers.m = 2;
    registers.t = 8;
  },
  LDIOCA: function () {
    MMU.wb(0xff00 + registers.c, registers.a);
    registers.m = 2;
    registers.t = 8;
  },

  LDHLSPn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    i += registers.sp;
    registers.h = (i >> 8) & 255;
    registers.l = i & 255;
    registers.m = 3;
    registers.t = 12;
  },

  SWAPr_b: function () {
    var tr = registers.b;
    registers.b = MMU.rb((registers.h << 8) + registers.l);
    MMU.wb((registers.h << 8) + registers.l, tr);
    registers.m = 4;
    registers.t = 16;
  },
  SWAPr_c: function () {
    var tr = registers.c;
    registers.c = MMU.rb((registers.h << 8) + registers.l);
    MMU.wb((registers.h << 8) + registers.l, tr);
    registers.m = 4;
    registers.t = 16;
  },
  SWAPr_d: function () {
    var tr = registers.d;
    registers.d = MMU.rb((registers.h << 8) + registers.l);
    MMU.wb((registers.h << 8) + registers.l, tr);
    registers.m = 4;
    registers.t = 16;
  },
  SWAPr_e: function () {
    var tr = registers.e;
    registers.e = MMU.rb((registers.h << 8) + registers.l);
    MMU.wb((registers.h << 8) + registers.l, tr);
    registers.m = 4;
    registers.t = 16;
  },
  SWAPr_h: function () {
    var tr = registers.h;
    registers.h = MMU.rb((registers.h << 8) + registers.l);
    MMU.wb((registers.h << 8) + registers.l, tr);
    registers.m = 4;
    registers.t = 16;
  },
  SWAPr_l: function () {
    var tr = registers.l;
    registers.l = MMU.rb((registers.h << 8) + registers.l);
    MMU.wb((registers.h << 8) + registers.l, tr);
    registers.m = 4;
    registers.t = 16;
  },
  SWAPr_a: function () {
    var tr = registers.a;
    registers.a = MMU.rb((registers.h << 8) + registers.l);
    MMU.wb((registers.h << 8) + registers.l, tr);
    registers.m = 4;
    registers.t = 16;
  },

  /*--- Data processing ---*/
  ADDr_b: function () {
    registers.a += registers.b;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADDr_c: function () {
    registers.a += registers.c;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADDr_d: function () {
    registers.a += registers.d;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADDr_e: function () {
    registers.a += registers.e;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADDr_h: function () {
    registers.a += registers.h;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADDr_l: function () {
    registers.a += registers.l;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADDr_a: function () {
    registers.a += registers.a;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADDHL: function () {
    registers.a += MMU.rb((registers.h << 8) + registers.l);
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },
  ADDn: function () {
    registers.a += MMU.rb(registers.pc);
    registers.pc++;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },
  ADDHLBC: function () {
    var hl = (registers.h << 8) + registers.l;
    hl += (registers.b << 8) + registers.c;
    if (hl > 65535) registers.f |= 0x10;
    else registers.f &= 0xef;
    registers.h = (hl >> 8) & 255;
    registers.l = hl & 255;
    registers.m = 3;
    registers.t = 12;
  },
  ADDHLDE: function () {
    var hl = (registers.h << 8) + registers.l;
    hl += (registers.d << 8) + registers.e;
    if (hl > 65535) registers.f |= 0x10;
    else registers.f &= 0xef;
    registers.h = (hl >> 8) & 255;
    registers.l = hl & 255;
    registers.m = 3;
    registers.t = 12;
  },
  ADDHLHL: function () {
    var hl = (registers.h << 8) + registers.l;
    hl += (registers.h << 8) + registers.l;
    if (hl > 65535) registers.f |= 0x10;
    else registers.f &= 0xef;
    registers.h = (hl >> 8) & 255;
    registers.l = hl & 255;
    registers.m = 3;
    registers.t = 12;
  },
  ADDHLSP: function () {
    var hl = (registers.h << 8) + registers.l;
    hl += registers.sp;
    if (hl > 65535) registers.f |= 0x10;
    else registers.f &= 0xef;
    registers.h = (hl >> 8) & 255;
    registers.l = hl & 255;
    registers.m = 3;
    registers.t = 12;
  },
  ADDSPn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    registers.sp += i;
    registers.m = 4;
    registers.t = 16;
  },

  ADCr_b: function () {
    registers.a += registers.b;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADCr_c: function () {
    registers.a += registers.c;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADCr_d: function () {
    registers.a += registers.d;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADCr_e: function () {
    registers.a += registers.e;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADCr_h: function () {
    registers.a += registers.h;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADCr_l: function () {
    registers.a += registers.l;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADCr_a: function () {
    registers.a += registers.a;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  ADCHL: function () {
    registers.a += MMU.rb((registers.h << 8) + registers.l);
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },
  ADCn: function () {
    registers.a += MMU.rb(registers.pc);
    registers.pc++;
    registers.a += registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a);
    if (registers.a > 255) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },

  SUBr_b: function () {
    registers.a -= registers.b;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SUBr_c: function () {
    registers.a -= registers.c;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SUBr_d: function () {
    registers.a -= registers.d;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SUBr_e: function () {
    registers.a -= registers.e;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SUBr_h: function () {
    registers.a -= registers.h;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SUBr_l: function () {
    registers.a -= registers.l;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SUBr_a: function () {
    registers.a -= registers.a;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SUBHL: function () {
    registers.a -= MMU.rb((registers.h << 8) + registers.l);
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },
  SUBn: function () {
    registers.a -= MMU.rb(registers.pc);
    registers.pc++;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },

  SBCr_b: function () {
    registers.a -= registers.b;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SBCr_c: function () {
    registers.a -= registers.c;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SBCr_d: function () {
    registers.a -= registers.d;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SBCr_e: function () {
    registers.a -= registers.e;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SBCr_h: function () {
    registers.a -= registers.h;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SBCr_l: function () {
    registers.a -= registers.l;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SBCr_a: function () {
    registers.a -= registers.a;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  SBCHL: function () {
    registers.a -= MMU.rb((registers.h << 8) + registers.l);
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },
  SBCn: function () {
    registers.a -= MMU.rb(registers.pc);
    registers.pc++;
    registers.a -= registers.f & 0x10 ? 1 : 0;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },

  CPr_b: function () {
    var i = registers.a;
    i -= registers.b;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  CPr_c: function () {
    var i = registers.a;
    i -= registers.c;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  CPr_d: function () {
    var i = registers.a;
    i -= registers.d;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  CPr_e: function () {
    var i = registers.a;
    i -= registers.e;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  CPr_h: function () {
    var i = registers.a;
    i -= registers.h;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  CPr_l: function () {
    var i = registers.a;
    i -= registers.l;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  CPr_a: function () {
    var i = registers.a;
    i -= registers.a;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 1;
    registers.t = 4;
  },
  CPHL: function () {
    var i = registers.a;
    i -= MMU.rb((registers.h << 8) + registers.l);
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 2;
    registers.t = 8;
  },
  CPn: function () {
    var i = registers.a;
    i -= MMU.rb(registers.pc);
    registers.pc++;
    Z80._ops.fz(i, 1);
    if (i < 0) registers.f |= 0x10;
    i &= 255;
    registers.m = 2;
    registers.t = 8;
  },

  ANDr_b: function () {
    registers.a &= registers.b;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ANDr_c: function () {
    registers.a &= registers.c;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ANDr_d: function () {
    registers.a &= registers.d;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ANDr_e: function () {
    registers.a &= registers.e;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ANDr_h: function () {
    registers.a &= registers.h;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ANDr_l: function () {
    registers.a &= registers.l;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ANDr_a: function () {
    registers.a &= registers.a;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ANDHL: function () {
    registers.a &= MMU.rb((registers.h << 8) + registers.l);
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 2;
    registers.t = 8;
  },
  ANDn: function () {
    registers.a &= MMU.rb(registers.pc);
    registers.pc++;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 2;
    registers.t = 8;
  },

  ORr_b: function () {
    registers.a |= registers.b;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ORr_c: function () {
    registers.a |= registers.c;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ORr_d: function () {
    registers.a |= registers.d;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ORr_e: function () {
    registers.a |= registers.e;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ORr_h: function () {
    registers.a |= registers.h;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ORr_l: function () {
    registers.a |= registers.l;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ORr_a: function () {
    registers.a |= registers.a;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  ORHL: function () {
    registers.a |= MMU.rb((registers.h << 8) + registers.l);
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 2;
    registers.t = 8;
  },
  ORn: function () {
    registers.a |= MMU.rb(registers.pc);
    registers.pc++;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 2;
    registers.t = 8;
  },

  XORr_b: function () {
    registers.a ^= registers.b;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  XORr_c: function () {
    registers.a ^= registers.c;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  XORr_d: function () {
    registers.a ^= registers.d;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  XORr_e: function () {
    registers.a ^= registers.e;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  XORr_h: function () {
    registers.a ^= registers.h;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  XORr_l: function () {
    registers.a ^= registers.l;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  XORr_a: function () {
    registers.a ^= registers.a;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  XORHL: function () {
    registers.a ^= MMU.rb((registers.h << 8) + registers.l);
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 2;
    registers.t = 8;
  },
  XORn: function () {
    registers.a ^= MMU.rb(registers.pc);
    registers.pc++;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 2;
    registers.t = 8;
  },

  INCr_c: function () {
    registers.c++;
    registers.c &= 255;
    Z80._ops.fz(registers.c);
    registers.m = 1;
    registers.t = 4;
  },
  INCr_d: function () {
    registers.d++;
    registers.d &= 255;
    Z80._ops.fz(registers.d);
    registers.m = 1;
    registers.t = 4;
  },
  INCr_e: function () {
    registers.e++;
    registers.e &= 255;
    Z80._ops.fz(registers.e);
    registers.m = 1;
    registers.t = 4;
  },
  INCr_h: function () {
    registers.h++;
    registers.h &= 255;
    Z80._ops.fz(registers.h);
    registers.m = 1;
    registers.t = 4;
  },
  INCr_l: function () {
    registers.l++;
    registers.l &= 255;
    Z80._ops.fz(registers.l);
    registers.m = 1;
    registers.t = 4;
  },
  INCr_a: function () {
    registers.a++;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  INCHLm: function () {
    var i = MMU.rb((registers.h << 8) + registers.l) + 1;
    i &= 255;
    MMU.wb((registers.h << 8) + registers.l, i);
    Z80._ops.fz(i);
    registers.m = 3;
    registers.t = 12;
  },

  DECr_c: function () {
    registers.c--;
    registers.c &= 255;
    Z80._ops.fz(registers.c);
    registers.m = 1;
    registers.t = 4;
  },
  DECr_d: function () {
    registers.d--;
    registers.d &= 255;
    Z80._ops.fz(registers.d);
    registers.m = 1;
    registers.t = 4;
  },
  DECr_e: function () {
    registers.e--;
    registers.e &= 255;
    Z80._ops.fz(registers.e);
    registers.m = 1;
    registers.t = 4;
  },
  DECr_h: function () {
    registers.h--;
    registers.h &= 255;
    Z80._ops.fz(registers.h);
    registers.m = 1;
    registers.t = 4;
  },
  DECr_l: function () {
    registers.l--;
    registers.l &= 255;
    Z80._ops.fz(registers.l);
    registers.m = 1;
    registers.t = 4;
  },
  DECr_a: function () {
    registers.a--;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.m = 1;
    registers.t = 4;
  },
  DECHLm: function () {
    var i = MMU.rb((registers.h << 8) + registers.l) - 1;
    i &= 255;
    MMU.wb((registers.h << 8) + registers.l, i);
    Z80._ops.fz(i);
    registers.m = 3;
    registers.t = 12;
  },

  INCDE: function () {
    registers.e = (registers.e + 1) & 255;
    if (!registers.e) registers.d = (registers.d + 1) & 255;
    registers.m = 1;
    registers.t = 4;
  },
  INCHL: function () {
    registers.l = (registers.l + 1) & 255;
    if (!registers.l) registers.h = (registers.h + 1) & 255;
    registers.m = 1;
    registers.t = 4;
  },
  INCSP: function () {
    registers.sp = (registers.sp + 1) & 65535;
    registers.m = 1;
    registers.t = 4;
  },

  DECBC: function () {
    registers.c = (registers.c - 1) & 255;
    if (registers.c == 255) registers.b = (registers.b - 1) & 255;
    registers.m = 1;
    registers.t = 4;
  },
  DECDE: function () {
    registers.e = (registers.e - 1) & 255;
    if (registers.e == 255) registers.d = (registers.d - 1) & 255;
    registers.m = 1;
    registers.t = 4;
  },
  DECHL: function () {
    registers.l = (registers.l - 1) & 255;
    if (registers.l == 255) registers.h = (registers.h - 1) & 255;
    registers.m = 1;
    registers.t = 4;
  },
  DECSP: function () {
    registers.sp = (registers.sp - 1) & 65535;
    registers.m = 1;
    registers.t = 4;
  },

  /*--- Bit manipulation ---*/
  BIT0b: function () {
    Z80._ops.fz(registers.b & 0x01);
    registers.m = 2;
    registers.t = 8;
  },
  BIT0c: function () {
    Z80._ops.fz(registers.c & 0x01);
    registers.m = 2;
    registers.t = 8;
  },
  BIT0d: function () {
    Z80._ops.fz(registers.d & 0x01);
    registers.m = 2;
    registers.t = 8;
  },
  BIT0e: function () {
    Z80._ops.fz(registers.e & 0x01);
    registers.m = 2;
    registers.t = 8;
  },
  BIT0h: function () {
    Z80._ops.fz(registers.h & 0x01);
    registers.m = 2;
    registers.t = 8;
  },
  BIT0l: function () {
    Z80._ops.fz(registers.l & 0x01);
    registers.m = 2;
    registers.t = 8;
  },
  BIT0a: function () {
    Z80._ops.fz(registers.a & 0x01);
    registers.m = 2;
    registers.t = 8;
  },
  BIT0m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x01);
    registers.m = 3;
    registers.t = 12;
  },

  BIT1b: function () {
    Z80._ops.fz(registers.b & 0x02);
    registers.m = 2;
    registers.t = 8;
  },
  BIT1c: function () {
    Z80._ops.fz(registers.c & 0x02);
    registers.m = 2;
    registers.t = 8;
  },
  BIT1d: function () {
    Z80._ops.fz(registers.d & 0x02);
    registers.m = 2;
    registers.t = 8;
  },
  BIT1e: function () {
    Z80._ops.fz(registers.e & 0x02);
    registers.m = 2;
    registers.t = 8;
  },
  BIT1h: function () {
    Z80._ops.fz(registers.h & 0x02);
    registers.m = 2;
    registers.t = 8;
  },
  BIT1l: function () {
    Z80._ops.fz(registers.l & 0x02);
    registers.m = 2;
    registers.t = 8;
  },
  BIT1a: function () {
    Z80._ops.fz(registers.a & 0x02);
    registers.m = 2;
    registers.t = 8;
  },
  BIT1m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x02);
    registers.m = 3;
    registers.t = 12;
  },

  BIT2b: function () {
    Z80._ops.fz(registers.b & 0x04);
    registers.m = 2;
    registers.t = 8;
  },
  BIT2c: function () {
    Z80._ops.fz(registers.c & 0x04);
    registers.m = 2;
    registers.t = 8;
  },
  BIT2d: function () {
    Z80._ops.fz(registers.d & 0x04);
    registers.m = 2;
    registers.t = 8;
  },
  BIT2e: function () {
    Z80._ops.fz(registers.e & 0x04);
    registers.m = 2;
    registers.t = 8;
  },
  BIT2h: function () {
    Z80._ops.fz(registers.h & 0x04);
    registers.m = 2;
    registers.t = 8;
  },
  BIT2l: function () {
    Z80._ops.fz(registers.l & 0x04);
    registers.m = 2;
    registers.t = 8;
  },
  BIT2a: function () {
    Z80._ops.fz(registers.a & 0x04);
    registers.m = 2;
    registers.t = 8;
  },
  BIT2m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x04);
    registers.m = 3;
    registers.t = 12;
  },

  BIT3b: function () {
    Z80._ops.fz(registers.b & 0x08);
    registers.m = 2;
    registers.t = 8;
  },
  BIT3c: function () {
    Z80._ops.fz(registers.c & 0x08);
    registers.m = 2;
    registers.t = 8;
  },
  BIT3d: function () {
    Z80._ops.fz(registers.d & 0x08);
    registers.m = 2;
    registers.t = 8;
  },
  BIT3e: function () {
    Z80._ops.fz(registers.e & 0x08);
    registers.m = 2;
    registers.t = 8;
  },
  BIT3h: function () {
    Z80._ops.fz(registers.h & 0x08);
    registers.m = 2;
    registers.t = 8;
  },
  BIT3l: function () {
    Z80._ops.fz(registers.l & 0x08);
    registers.m = 2;
    registers.t = 8;
  },
  BIT3a: function () {
    Z80._ops.fz(registers.a & 0x08);
    registers.m = 2;
    registers.t = 8;
  },
  BIT3m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x08);
    registers.m = 3;
    registers.t = 12;
  },

  BIT4b: function () {
    Z80._ops.fz(registers.b & 0x10);
    registers.m = 2;
    registers.t = 8;
  },
  BIT4c: function () {
    Z80._ops.fz(registers.c & 0x10);
    registers.m = 2;
    registers.t = 8;
  },
  BIT4d: function () {
    Z80._ops.fz(registers.d & 0x10);
    registers.m = 2;
    registers.t = 8;
  },
  BIT4e: function () {
    Z80._ops.fz(registers.e & 0x10);
    registers.m = 2;
    registers.t = 8;
  },
  BIT4h: function () {
    Z80._ops.fz(registers.h & 0x10);
    registers.m = 2;
    registers.t = 8;
  },
  BIT4l: function () {
    Z80._ops.fz(registers.l & 0x10);
    registers.m = 2;
    registers.t = 8;
  },
  BIT4a: function () {
    Z80._ops.fz(registers.a & 0x10);
    registers.m = 2;
    registers.t = 8;
  },
  BIT4m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x10);
    registers.m = 3;
    registers.t = 12;
  },

  BIT5b: function () {
    Z80._ops.fz(registers.b & 0x20);
    registers.m = 2;
    registers.t = 8;
  },
  BIT5c: function () {
    Z80._ops.fz(registers.c & 0x20);
    registers.m = 2;
    registers.t = 8;
  },
  BIT5d: function () {
    Z80._ops.fz(registers.d & 0x20);
    registers.m = 2;
    registers.t = 8;
  },
  BIT5e: function () {
    Z80._ops.fz(registers.e & 0x20);
    registers.m = 2;
    registers.t = 8;
  },
  BIT5h: function () {
    Z80._ops.fz(registers.h & 0x20);
    registers.m = 2;
    registers.t = 8;
  },
  BIT5l: function () {
    Z80._ops.fz(registers.l & 0x20);
    registers.m = 2;
    registers.t = 8;
  },
  BIT5a: function () {
    Z80._ops.fz(registers.a & 0x20);
    registers.m = 2;
    registers.t = 8;
  },
  BIT5m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x20);
    registers.m = 3;
    registers.t = 12;
  },

  BIT6b: function () {
    Z80._ops.fz(registers.b & 0x40);
    registers.m = 2;
    registers.t = 8;
  },
  BIT6c: function () {
    Z80._ops.fz(registers.c & 0x40);
    registers.m = 2;
    registers.t = 8;
  },
  BIT6d: function () {
    Z80._ops.fz(registers.d & 0x40);
    registers.m = 2;
    registers.t = 8;
  },
  BIT6e: function () {
    Z80._ops.fz(registers.e & 0x40);
    registers.m = 2;
    registers.t = 8;
  },
  BIT6h: function () {
    Z80._ops.fz(registers.h & 0x40);
    registers.m = 2;
    registers.t = 8;
  },
  BIT6l: function () {
    Z80._ops.fz(registers.l & 0x40);
    registers.m = 2;
    registers.t = 8;
  },
  BIT6a: function () {
    Z80._ops.fz(registers.a & 0x40);
    registers.m = 2;
    registers.t = 8;
  },
  BIT6m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x40);
    registers.m = 3;
    registers.t = 12;
  },

  BIT7b: function () {
    Z80._ops.fz(registers.b & 0x80);
    registers.m = 2;
    registers.t = 8;
  },
  BIT7c: function () {
    Z80._ops.fz(registers.c & 0x80);
    registers.m = 2;
    registers.t = 8;
  },
  BIT7d: function () {
    Z80._ops.fz(registers.d & 0x80);
    registers.m = 2;
    registers.t = 8;
  },
  BIT7e: function () {
    Z80._ops.fz(registers.e & 0x80);
    registers.m = 2;
    registers.t = 8;
  },
  BIT7h: function () {
    Z80._ops.fz(registers.h & 0x80);
    registers.m = 2;
    registers.t = 8;
  },
  BIT7l: function () {
    Z80._ops.fz(registers.l & 0x80);
    registers.m = 2;
    registers.t = 8;
  },
  BIT7a: function () {
    Z80._ops.fz(registers.a & 0x80);
    registers.m = 2;
    registers.t = 8;
  },
  BIT7m: function () {
    Z80._ops.fz(MMU.rb((registers.h << 8) + registers.l) & 0x80);
    registers.m = 3;
    registers.t = 12;
  },

  RLA: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.a & 0x80 ? 0x10 : 0;
    registers.a = (registers.a << 1) + ci;
    registers.a &= 255;
    registers.f = (registers.f & 0xef) + co;
    registers.m = 1;
    registers.t = 4;
  },
  RRA: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.a & 1 ? 0x10 : 0;
    registers.a = (registers.a >> 1) + ci;
    registers.a &= 255;
    registers.f = (registers.f & 0xef) + co;
    registers.m = 1;
    registers.t = 4;
  },
  RRCA: function () {
    var ci = registers.a & 1 ? 0x80 : 0;
    var co = registers.a & 1 ? 0x10 : 0;
    registers.a = (registers.a >> 1) + ci;
    registers.a &= 255;
    registers.f = (registers.f & 0xef) + co;
    registers.m = 1;
    registers.t = 4;
  },

  RLr_b: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.b & 0x80 ? 0x10 : 0;
    registers.b = (registers.b << 1) + ci;
    registers.b &= 255;
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLr_c: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.c & 0x80 ? 0x10 : 0;
    registers.c = (registers.c << 1) + ci;
    registers.c &= 255;
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLr_d: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.d & 0x80 ? 0x10 : 0;
    registers.d = (registers.d << 1) + ci;
    registers.d &= 255;
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLr_e: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.e & 0x80 ? 0x10 : 0;
    registers.e = (registers.e << 1) + ci;
    registers.e &= 255;
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLr_h: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.h & 0x80 ? 0x10 : 0;
    registers.h = (registers.h << 1) + ci;
    registers.h &= 255;
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLr_l: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.l & 0x80 ? 0x10 : 0;
    registers.l = (registers.l << 1) + ci;
    registers.l &= 255;
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLr_a: function () {
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = registers.a & 0x80 ? 0x10 : 0;
    registers.a = (registers.a << 1) + ci;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLHL: function () {
    var i = MMU.rb((registers.h << 8) + registers.l);
    var ci = registers.f & 0x10 ? 1 : 0;
    var co = i & 0x80 ? 0x10 : 0;
    i = (i << 1) + ci;
    i &= 255;
    Z80._ops.fz(i);
    MMU.wb((registers.h << 8) + registers.l, i);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 4;
    registers.t = 16;
  },

  RLCr_b: function () {
    var ci = registers.b & 0x80 ? 1 : 0;
    var co = registers.b & 0x80 ? 0x10 : 0;
    registers.b = (registers.b << 1) + ci;
    registers.b &= 255;
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLCr_c: function () {
    var ci = registers.c & 0x80 ? 1 : 0;
    var co = registers.c & 0x80 ? 0x10 : 0;
    registers.c = (registers.c << 1) + ci;
    registers.c &= 255;
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLCr_d: function () {
    var ci = registers.d & 0x80 ? 1 : 0;
    var co = registers.d & 0x80 ? 0x10 : 0;
    registers.d = (registers.d << 1) + ci;
    registers.d &= 255;
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLCr_e: function () {
    var ci = registers.e & 0x80 ? 1 : 0;
    var co = registers.e & 0x80 ? 0x10 : 0;
    registers.e = (registers.e << 1) + ci;
    registers.e &= 255;
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLCr_h: function () {
    var ci = registers.h & 0x80 ? 1 : 0;
    var co = registers.h & 0x80 ? 0x10 : 0;
    registers.h = (registers.h << 1) + ci;
    registers.h &= 255;
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLCr_l: function () {
    var ci = registers.l & 0x80 ? 1 : 0;
    var co = registers.l & 0x80 ? 0x10 : 0;
    registers.l = (registers.l << 1) + ci;
    registers.l &= 255;
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLCr_a: function () {
    var ci = registers.a & 0x80 ? 1 : 0;
    var co = registers.a & 0x80 ? 0x10 : 0;
    registers.a = (registers.a << 1) + ci;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RLCHL: function () {
    var i = MMU.rb((registers.h << 8) + registers.l);
    var ci = i & 0x80 ? 1 : 0;
    var co = i & 0x80 ? 0x10 : 0;
    i = (i << 1) + ci;
    i &= 255;
    Z80._ops.fz(i);
    MMU.wb((registers.h << 8) + registers.l, i);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 4;
    registers.t = 16;
  },

  RRr_b: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.b & 1 ? 0x10 : 0;
    registers.b = (registers.b >> 1) + ci;
    registers.b &= 255;
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRr_c: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.c & 1 ? 0x10 : 0;
    registers.c = (registers.c >> 1) + ci;
    registers.c &= 255;
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRr_d: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.d & 1 ? 0x10 : 0;
    registers.d = (registers.d >> 1) + ci;
    registers.d &= 255;
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRr_e: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.e & 1 ? 0x10 : 0;
    registers.e = (registers.e >> 1) + ci;
    registers.e &= 255;
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRr_h: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.h & 1 ? 0x10 : 0;
    registers.h = (registers.h >> 1) + ci;
    registers.h &= 255;
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRr_l: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.l & 1 ? 0x10 : 0;
    registers.l = (registers.l >> 1) + ci;
    registers.l &= 255;
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRr_a: function () {
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = registers.a & 1 ? 0x10 : 0;
    registers.a = (registers.a >> 1) + ci;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRHL: function () {
    var i = MMU.rb((registers.h << 8) + registers.l);
    var ci = registers.f & 0x10 ? 0x80 : 0;
    var co = i & 1 ? 0x10 : 0;
    i = (i >> 1) + ci;
    i &= 255;
    MMU.wb((registers.h << 8) + registers.l, i);
    Z80._ops.fz(i);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 4;
    registers.t = 16;
  },

  RRCr_b: function () {
    var ci = registers.b & 1 ? 0x80 : 0;
    var co = registers.b & 1 ? 0x10 : 0;
    registers.b = (registers.b >> 1) + ci;
    registers.b &= 255;
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRCr_c: function () {
    var ci = registers.c & 1 ? 0x80 : 0;
    var co = registers.c & 1 ? 0x10 : 0;
    registers.c = (registers.c >> 1) + ci;
    registers.c &= 255;
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRCr_d: function () {
    var ci = registers.d & 1 ? 0x80 : 0;
    var co = registers.d & 1 ? 0x10 : 0;
    registers.d = (registers.d >> 1) + ci;
    registers.d &= 255;
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRCr_e: function () {
    var ci = registers.e & 1 ? 0x80 : 0;
    var co = registers.e & 1 ? 0x10 : 0;
    registers.e = (registers.e >> 1) + ci;
    registers.e &= 255;
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRCr_h: function () {
    var ci = registers.h & 1 ? 0x80 : 0;
    var co = registers.h & 1 ? 0x10 : 0;
    registers.h = (registers.h >> 1) + ci;
    registers.h &= 255;
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRCr_l: function () {
    var ci = registers.l & 1 ? 0x80 : 0;
    var co = registers.l & 1 ? 0x10 : 0;
    registers.l = (registers.l >> 1) + ci;
    registers.l &= 255;
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRCr_a: function () {
    var ci = registers.a & 1 ? 0x80 : 0;
    var co = registers.a & 1 ? 0x10 : 0;
    registers.a = (registers.a >> 1) + ci;
    registers.a &= 255;
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  RRCHL: function () {
    var i = MMU.rb((registers.h << 8) + registers.l);
    var ci = i & 1 ? 0x80 : 0;
    var co = i & 1 ? 0x10 : 0;
    i = (i >> 1) + ci;
    i &= 255;
    MMU.wb((registers.h << 8) + registers.l, i);
    Z80._ops.fz(i);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 4;
    registers.t = 16;
  },

  SLAr_b: function () {
    var co = registers.b & 0x80 ? 0x10 : 0;
    registers.b = (registers.b << 1) & 255;
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLAr_c: function () {
    var co = registers.c & 0x80 ? 0x10 : 0;
    registers.c = (registers.c << 1) & 255;
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLAr_d: function () {
    var co = registers.d & 0x80 ? 0x10 : 0;
    registers.d = (registers.d << 1) & 255;
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLAr_e: function () {
    var co = registers.e & 0x80 ? 0x10 : 0;
    registers.e = (registers.e << 1) & 255;
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLAr_h: function () {
    var co = registers.h & 0x80 ? 0x10 : 0;
    registers.h = (registers.h << 1) & 255;
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLAr_l: function () {
    var co = registers.l & 0x80 ? 0x10 : 0;
    registers.l = (registers.l << 1) & 255;
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLAr_a: function () {
    var co = registers.a & 0x80 ? 0x10 : 0;
    registers.a = (registers.a << 1) & 255;
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },

  SLLr_b: function () {
    var co = registers.b & 0x80 ? 0x10 : 0;
    registers.b = (registers.b << 1) & (255 + 1);
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLLr_c: function () {
    var co = registers.c & 0x80 ? 0x10 : 0;
    registers.c = (registers.c << 1) & (255 + 1);
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLLr_d: function () {
    var co = registers.d & 0x80 ? 0x10 : 0;
    registers.d = (registers.d << 1) & (255 + 1);
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLLr_e: function () {
    var co = registers.e & 0x80 ? 0x10 : 0;
    registers.e = (registers.e << 1) & (255 + 1);
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLLr_h: function () {
    var co = registers.h & 0x80 ? 0x10 : 0;
    registers.h = (registers.h << 1) & (255 + 1);
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLLr_l: function () {
    var co = registers.l & 0x80 ? 0x10 : 0;
    registers.l = (registers.l << 1) & (255 + 1);
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SLLr_a: function () {
    var co = registers.a & 0x80 ? 0x10 : 0;
    registers.a = (registers.a << 1) & (255 + 1);
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },

  SRAr_b: function () {
    var ci = registers.b & 0x80;
    var co = registers.b & 1 ? 0x10 : 0;
    registers.b = ((registers.b >> 1) + ci) & 255;
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRAr_c: function () {
    var ci = registers.c & 0x80;
    var co = registers.c & 1 ? 0x10 : 0;
    registers.c = ((registers.c >> 1) + ci) & 255;
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRAr_d: function () {
    var ci = registers.d & 0x80;
    var co = registers.d & 1 ? 0x10 : 0;
    registers.d = ((registers.d >> 1) + ci) & 255;
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRAr_e: function () {
    var ci = registers.e & 0x80;
    var co = registers.e & 1 ? 0x10 : 0;
    registers.e = ((registers.e >> 1) + ci) & 255;
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRAr_h: function () {
    var ci = registers.h & 0x80;
    var co = registers.h & 1 ? 0x10 : 0;
    registers.h = ((registers.h >> 1) + ci) & 255;
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRAr_l: function () {
    var ci = registers.l & 0x80;
    var co = registers.l & 1 ? 0x10 : 0;
    registers.l = ((registers.l >> 1) + ci) & 255;
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRAr_a: function () {
    var ci = registers.a & 0x80;
    var co = registers.a & 1 ? 0x10 : 0;
    registers.a = ((registers.a >> 1) + ci) & 255;
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },

  SRLr_b: function () {
    var co = registers.b & 1 ? 0x10 : 0;
    registers.b = (registers.b >> 1) & 255;
    Z80._ops.fz(registers.b);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRLr_c: function () {
    var co = registers.c & 1 ? 0x10 : 0;
    registers.c = (registers.c >> 1) & 255;
    Z80._ops.fz(registers.c);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRLr_d: function () {
    var co = registers.d & 1 ? 0x10 : 0;
    registers.d = (registers.d >> 1) & 255;
    Z80._ops.fz(registers.d);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRLr_e: function () {
    var co = registers.e & 1 ? 0x10 : 0;
    registers.e = (registers.e >> 1) & 255;
    Z80._ops.fz(registers.e);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRLr_h: function () {
    var co = registers.h & 1 ? 0x10 : 0;
    registers.h = (registers.h >> 1) & 255;
    Z80._ops.fz(registers.h);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRLr_l: function () {
    var co = registers.l & 1 ? 0x10 : 0;
    registers.l = (registers.l >> 1) & 255;
    Z80._ops.fz(registers.l);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },
  SRLr_a: function () {
    var co = registers.a & 1 ? 0x10 : 0;
    registers.a = (registers.a >> 1) & 255;
    Z80._ops.fz(registers.a);
    registers.f = (registers.f & 0xef) + co;
    registers.m = 2;
    registers.t = 8;
  },

  CPL: function () {
    registers.a = ~registers.a & 255;
    Z80._ops.fz(registers.a, 1);
    registers.m = 1;
    registers.t = 4;
  },
  NEG: function () {
    registers.a = 0 - registers.a;
    Z80._ops.fz(registers.a, 1);
    if (registers.a < 0) registers.f |= 0x10;
    registers.a &= 255;
    registers.m = 2;
    registers.t = 8;
  },

  CCF: function () {
    var ci = registers.f & 0x10 ? 0 : 0x10;
    registers.f = (registers.f & 0xef) + ci;
    registers.m = 1;
    registers.t = 4;
  },
  SCF: function () {
    registers.f |= 0x10;
    registers.m = 1;
    registers.t = 4;
  },

  /*--- Stack ---*/
  PUSHBC: function () {
    registers.sp--;
    MMU.wb(registers.sp, registers.b);
    registers.sp--;
    MMU.wb(registers.sp, registers.c);
    registers.m = 3;
    registers.t = 12;
  },
  PUSHDE: function () {
    registers.sp--;
    MMU.wb(registers.sp, registers.d);
    registers.sp--;
    MMU.wb(registers.sp, registers.e);
    registers.m = 3;
    registers.t = 12;
  },
  PUSHHL: function () {
    registers.sp--;
    MMU.wb(registers.sp, registers.h);
    registers.sp--;
    MMU.wb(registers.sp, registers.l);
    registers.m = 3;
    registers.t = 12;
  },
  PUSHAF: function () {
    registers.sp--;
    MMU.wb(registers.sp, registers.a);
    registers.sp--;
    MMU.wb(registers.sp, registers.f);
    registers.m = 3;
    registers.t = 12;
  },

  POPBC: function () {
    registers.c = MMU.rb(registers.sp);
    registers.sp++;
    registers.b = MMU.rb(registers.sp);
    registers.sp++;
    registers.m = 3;
    registers.t = 12;
  },
  POPDE: function () {
    registers.e = MMU.rb(registers.sp);
    registers.sp++;
    registers.d = MMU.rb(registers.sp);
    registers.sp++;
    registers.m = 3;
    registers.t = 12;
  },
  POPHL: function () {
    registers.l = MMU.rb(registers.sp);
    registers.sp++;
    registers.h = MMU.rb(registers.sp);
    registers.sp++;
    registers.m = 3;
    registers.t = 12;
  },
  POPAF: function () {
    registers.f = MMU.rb(registers.sp);
    registers.sp++;
    registers.a = MMU.rb(registers.sp);
    registers.sp++;
    registers.m = 3;
    registers.t = 12;
  },

  /*--- Jump ---*/
  JPnn: function () {
    registers.pc = MMU.rw(registers.pc);
    registers.m = 3;
    registers.t = 12;
  },
  JPHL: function () {
    registers.pc = registers.hl;
    registers.m = 1;
    registers.t = 4;
  },
  JPNZnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x80) == 0x00) {
      registers.pc = MMU.rw(registers.pc);
      registers.m++;
      registers.t += 4;
    } else registers.pc += 2;
  },
  JPZnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x80) == 0x80) {
      registers.pc = MMU.rw(registers.pc);
      registers.m++;
      registers.t += 4;
    } else registers.pc += 2;
  },
  JPNCnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x10) == 0x00) {
      registers.pc = MMU.rw(registers.pc);
      registers.m++;
      registers.t += 4;
    } else registers.pc += 2;
  },
  JPCnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x10) == 0x10) {
      registers.pc = MMU.rw(registers.pc);
      registers.m++;
      registers.t += 4;
    } else registers.pc += 2;
  },

  JRn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
    registers.pc += i;
    registers.m++;
    registers.t += 4;
  },
  JRNZn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
    if ((registers.f & 0x80) == 0x00) {
      registers.pc += i;
      registers.m++;
      registers.t += 4;
    }
  },
  JRZn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
    if ((registers.f & 0x80) == 0x80) {
      registers.pc += i;
      registers.m++;
      registers.t += 4;
    }
  },
  JRNCn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
    if ((registers.f & 0x10) == 0x00) {
      registers.pc += i;
      registers.m++;
      registers.t += 4;
    }
  },
  JRCn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
    if ((registers.f & 0x10) == 0x10) {
      registers.pc += i;
      registers.m++;
      registers.t += 4;
    }
  },

  DJNZn: function () {
    var i = MMU.rb(registers.pc);
    if (i > 127) i = -((~i + 1) & 255);
    registers.pc++;
    registers.m = 2;
    registers.t = 8;
    registers.b--;
    if (registers.b) {
      registers.pc += i;
      registers.m++;
      registers.t += 4;
    }
  },

  CALLnn: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc + 2);
    registers.pc = MMU.rw(registers.pc);
    registers.m = 5;
    registers.t = 20;
  },
  CALLNZnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x80) == 0x00) {
      registers.sp -= 2;
      MMU.ww(registers.sp, registers.pc + 2);
      registers.pc = MMU.rw(registers.pc);
      registers.m += 2;
      registers.t += 8;
    } else registers.pc += 2;
  },
  CALLZnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x80) == 0x80) {
      registers.sp -= 2;
      MMU.ww(registers.sp, registers.pc + 2);
      registers.pc = MMU.rw(registers.pc);
      registers.m += 2;
      registers.t += 8;
    } else registers.pc += 2;
  },
  CALLNCnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x10) == 0x00) {
      registers.sp -= 2;
      MMU.ww(registers.sp, registers.pc + 2);
      registers.pc = MMU.rw(registers.pc);
      registers.m += 2;
      registers.t += 8;
    } else registers.pc += 2;
  },
  CALLCnn: function () {
    registers.m = 3;
    registers.t = 12;
    if ((registers.f & 0x10) == 0x10) {
      registers.sp -= 2;
      MMU.ww(registers.sp, registers.pc + 2);
      registers.pc = MMU.rw(registers.pc);
      registers.m += 2;
      registers.t += 8;
    } else registers.pc += 2;
  },

  RET: function () {
    registers.pc = MMU.rw(registers.sp);
    registers.sp += 2;
    registers.m = 3;
    registers.t = 12;
  },
  RETI: function () {
    registers.ime = 1;
    registers.pc = MMU.rw(registers.sp);
    registers.sp += 2;
    registers.m = 3;
    registers.t = 12;
  },
  RETNZ: function () {
    registers.m = 1;
    registers.t = 4;
    if ((registers.f & 0x80) == 0x00) {
      registers.pc = MMU.rw(registers.sp);
      registers.sp += 2;
      registers.m += 2;
      registers.t += 8;
    }
  },
  RETZ: function () {
    registers.m = 1;
    registers.t = 4;
    if ((registers.f & 0x80) == 0x80) {
      registers.pc = MMU.rw(registers.sp);
      registers.sp += 2;
      registers.m += 2;
      registers.t += 8;
    }
  },
  RETNC: function () {
    registers.m = 1;
    registers.t = 4;
    if ((registers.f & 0x10) == 0x00) {
      registers.pc = MMU.rw(registers.sp);
      registers.sp += 2;
      registers.m += 2;
      registers.t += 8;
    }
  },
  RETC: function () {
    registers.m = 1;
    registers.t = 4;
    if ((registers.f & 0x10) == 0x10) {
      registers.pc = MMU.rw(registers.sp);
      registers.sp += 2;
      registers.m += 2;
      registers.t += 8;
    }
  },

  RST00: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x00;
    registers.m = 3;
    registers.t = 12;
  },
  RST08: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x08;
    registers.m = 3;
    registers.t = 12;
  },
  RST10: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x10;
    registers.m = 3;
    registers.t = 12;
  },
  RST18: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x18;
    registers.m = 3;
    registers.t = 12;
  },
  RST20: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x20;
    registers.m = 3;
    registers.t = 12;
  },
  RST28: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x28;
    registers.m = 3;
    registers.t = 12;
  },
  RST30: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x30;
    registers.m = 3;
    registers.t = 12;
  },
  RST38: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x38;
    registers.m = 3;
    registers.t = 12;
  },
  RST40: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x40;
    registers.m = 3;
    registers.t = 12;
  },
  RST48: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x48;
    registers.m = 3;
    registers.t = 12;
  },
  RST50: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x50;
    registers.m = 3;
    registers.t = 12;
  },
  RST58: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x58;
    registers.m = 3;
    registers.t = 12;
  },
  RST60: function () {
    registers.sp -= 2;
    MMU.ww(registers.sp, registers.pc);
    registers.pc = 0x60;
    registers.m = 3;
    registers.t = 12;
  },

  NOP: function () {
    registers.m = 1;
    registers.t = 4;
  },
  HALT: function () {
    Z80._halt = 1;
    registers.m = 1;
    registers.t = 4;
  },

  DI: function () {
    registers.ime = 0;
    registers.m = 1;
    registers.t = 4;
  },
  EI: function () {
    registers.ime = 1;
    registers.m = 1;
    registers.t = 4;
  },

  /*--- Helper functions ---*/
  fz: function (i, as) {
    registers.f = 0;
    if (!(i & 255)) registers.f |= 128;
    registers.f |= as ? 0x40 : 0;
  },
  MAPcb: function () {
    var i = MMU.rb(registers.pc);
    registers.pc++;
    registers.pc &= 65535;
    if (Z80._cbmap[i]) Z80._cbmap[i]();
    else alert(i);
  },

  XX: function () {
    /*Undefined map entry*/
    var opc = registers.pc - 1;
    alert("Unimplemented instruction at $" + opc.toString(16) + ", stopping.");
    Z80._stop = 1;
  },
};
